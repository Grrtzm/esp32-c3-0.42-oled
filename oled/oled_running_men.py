from ssd1306oled042b import SSD1306
from machine import I2C, Pin
import framebuf
import time

# create I2C interface
i2c = I2C(0, sda=Pin(5), scl=Pin(6), freq=400000)

# create oled display
oled = SSD1306(i2c)

# clear and flip the display
oled.clear()
oled.flip()

# bytearrays for the running animation frames
running1 = bytearray(b'\x00\x00\x00\x00\x00\x00p\x00\x00\x00\xf8\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x00\xf9\x80\x00\x01\xe1\x80\x00\x0f\xe3\x80\x00?\xf3\x00\x00|\xf7\x00\x00q\xff\x00\x00q\xde\x00\x00a\xde\x00\x00a\xcc\x00\x00\xe1\xc0\x00\x00\xe1\x80\x00\x00\xe1\x80\x00\x00A\x80\x00\x00\x01\xf8\x00\x00\x03\xff\x80\x00\x03?\xc0\x00\x07\x03\xc0\x00\x07\x03\x80\x00\x0e\x03\x80\x00\x0e\x07\x00\x00\x0c\x0e\x00\x00\x1c\x0e\x00\x00<\x1c\x00\x00\xf8\x1c\x00\x01\xe0\x1e\x00\x03\xc0\x0c\x00\x07\x80\x00\x00\x0f\x00\x00\x00\x0e\x00\x00\x00\x0e\x00\x00\x00\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
running2 = bytearray(b'\x00\x00\x00\x00\x00\x00p\x00\x00\x01\xf8\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfd\x80\x00\x01\xfb\x80\x00\x00\xfb\x80\x00\x03\xe3\x80\x00\x0f\xf3\x00\x00?\xfb\x00\x00|\xff\x00\x00q\xdf\x00\x00q\xcf\x00\x00q\xc6\x00\x00q\xc0\x00\x00a\xc0\x00\x00a\x80\x00\x00a\x80\x00\x00a\x80\x00\x00\x03\xf8\x00\x00\x03\xff\x80\x00\x07\x1f\xc0\x00\x0e\x01\xc0\x00\x0e\x01\xc0\x00\x1c\x01\xc0\x008\x01\x80\x00x\x01\x80\x00\xf0\x01\x80\x03\xe0\x03\x80\x07\x80\x03\x80\x0f\x00\x03\x80>\x00\x03\xc08\x00\x00\xc08\x00\x00\x008\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
running3 = bytearray(b'\x00\x00\x00\x00\x00\x00\xf0\x00\x00\x01\xf8\x00\x00\x01\xfc\x00\x00\x01\xfe\x00\x00\x01\xff\x00\x00\x01\xff\x00\x00\x00\xf7\x00\x00\x01\xe7\x00\x00\x07\xf7\x00\x00\x1f\xff\x00\x00<\xdf\x00\x009\xcf\x00\x001\xc7\x00\x001\xc0\x00\x009\xc0\x00\x009\xc0\x00\x009\x80\x00\x009\x80\x00\x009\xc0\x00\x00\x03\xf8\x00\x00\x03\xff\x00\x00\x03\x1f\xc0\x00\x07\x03\xc0\x00\x07\x00\xc0\x00\x06\x00\xc0\x00\x0e\x00\xc0\x00\x0e\x00\xe0\x01\xfc\x00\xe0\x1f\xfc\x00\xe0?\xe0\x00\xe08\x00\x00x8\x00\x00x\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
running4 = bytearray(b'\x00\x00\x00\x00\x00\x00p\x00\x00\x00\xf8\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x00\xf8\x00\x00\x00\xe0\x00\x00\x01\xe0\x00\x00\x03\xe0\x00\x00\x07\xe0\x00\x00\x0f\xe0\x00\x00\x0f\xe3\xe0\x00\x1d\xff\xe0\x00\r\xff\x00\x00\r\xf8\x00\x00\r\x80\x00\x00\x0f\x80\x00\x00\x0f\x80\x00\x00\x0f\xc0\x00\x00\x0f\xe0\x00\x00\x07\xf0\x00\x00\x03\xf8\x00\x00\x03\xbc\x00\x00\x03\x1e\x00\x00\x03\x07\x00\x0f\xc7\x03\x00\x1f\xff\x03\x80\x1f\xff\x03\x80\x00\x0e\x01\xc0\x00\x00\x01\xc0\x00\x00\x00\xc0\x00\x00\x00\xe0\x00\x00\x00\xf8\x00\x00\x00x\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
running5 = bytearray(b'\x00\x00\x00\x00\x00\x00 \x00\x00\x00\xf8\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x00\xf8\x00\x00\x00\xf0\x00\x00\x00\xc0\x00\x00\x01\xc0\x00\x00\x01\xc0\x00\x00\x01\xc0\x00\x00\x01\xc0\x00\x00\x03\xc0\x00\x00\x03\xfe\x00\x00\x03\xff\x80\x00\x03\xff\x80\x00\x03\x80\x00\x00\x01\x80\x00\x00\x01\x80\x00\x00\x01\xc0\x00\x00\x01\xe0\x00\x00\x01\xf8\x00\x00\x01\xbc\x00\x03\x81\x9e\x00\x07\xe1\x8f\x00\x07\xfd\x87\x00\x00\x7f\xc3\x00\x00\x0f\xc3\x80\x00\x03\x83\x80\x00\x00\x01\x80\x00\x00\x01\xc0\x00\x00\x00\xc0\x00\x00\x00\xf0\x00\x00\x00\xf8\x00\x00\x00p\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
running6 = bytearray(b'\x00\x00\x00\x00\x00\x00 \x00\x00\x00\xf8\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x00\xf8\x00\x00\x00\xf0\x00\x00\x00\xc0\x00\x00\x00\xc0\x00\x00\x01\xc0\x00\x00\x01\xc0\x00\x00\x01\xc0\x00\x00\x01\xc0\x00\x00\x03\xc0\x00\x00\x03\xe0\x00\x00\x01\xf0\x00\x00\x01\xfc\x00\x00\x01\xfe\x00\x00\x01\xbe\x00\x00\x01\xf8\x00\x00\x01\xf8\x00\x00\x01\xf8\x00\x00\x01\xf0\x00\x01\xf0\xf8\x00\x01\xfc\xfc\x00\x00?\xfc\x00\x00\x0f\xee\x00\x00\x01\xee\x00\x00\x00f\x00\x00\x00\x07\x00\x00\x00\x07\x00\x00\x00\x03\x00\x00\x00\x03\x80\x00\x00\x03\x80\x00\x00\x03\xe0\x00\x00\x01\xe0\x00\x00\x00\x00\x00\x00\x00\x00')
running7 = bytearray(b'\x00\x00\x00\x00\x00\x00`\x00\x00\x00\xf8\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x00\xf8\x00\x00\x00\xe0\x00\x00\x00\xc0\x00\x00\x01\xc0\x00\x00\x01\xc0\x00\x00\x03\xc0\x00\x00\x03\xc0\x00\x00\x03\xc0\x00\x00\x07\xe0\x00\x00\x07\xfc\x00\x00\x03\xff\x00\x00\x03\x8f\x80\x00\x03\x83\x80\x00\x03\x80\x00\x00\x03\xc0\x00\x00\x03\xc0\x00\x00\x03\xe0\x00\x00\x01\xf0\x00\x00\x10\xf0\x00\x00?\xf8\x00\x00\x7f\xf8\x00\x00c\xfc\x00\x00\x00\xfc\x00\x00\x00\xe0\x00\x00\x00\xe0\x00\x00\x00\xe0\x00\x00\x00\xe0\x00\x00\x00\xe0\x00\x00\x00\xc0\x00\x00\x00\xc0\x00\x00\x00\xc0\x00\x00\x01\xf0\x00\x00\x00\xf0\x00')
running8 = bytearray(b'\x00\x00\x00\x00\x00\x00`\x00\x00\x00\xf8\x00\x00\x01\xf8\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x00\xf8\x00\x00\x00\xe0\x00\x00\x01\xc0\x00\x00\x03\xe0\x00\x00\x07\xe0\x00\x00\x07\xe0\x00\x00\x0f\xe1\xc0\x00\x1d\xff\xc0\x00\x1d\xff\x80\x00\x19\xf8\x00\x00\x19\xc0\x00\x009\x80\x00\x009\x80\x00\x001\xc0\x00\x001\xe0\x00\x001\xf8\x00\x00\x01\xbc\x00\x00\x01\x9f\x00\x00\x01\xbf\x80\x00\x03\xff\x80\x00\x07\xf8\x00\x00\x07\x80\x00\x00\x07\xc0\x00\x00\x01\x80\x00\x00\x03\x80\x00\x00\x03\x80\x00\x00\x03\x00\x00\x00\x07\x00\x00\x00\x07\x00\x00\x00\x0e\x00\x00\x00\x0e\x00\x00\x00\x0f\x00\x00\x00\x0f\x00\x00')
running9 = bytearray(b'\x00\x00\x00\x00\x00\x00`\x00\x00\x01\xf8\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xf8\x00\x00\x00\xf8\x00\x00\x01\xe0\x00\x00\x03\xe0\xe0\x00\x0f\xe1\xe0\x00>\xf3\xc0\x008\xff\x80\x001\xff\x00\x001\xde\x00\x00q\xdc\x00\x00q\xc0\x00\x00q\xc0\x00\x00q\x80\x00\x00q\x80\x00\x00a\xe0\x00\x00\x03\xfc\x00\x00\x03\xff\x80\x00\x03\x8f\xc0\x00\x03\x87\x80\x00\x03\x8f\x00\x00\x03\x9e\x00\x00\x03|\x00\x00\x03\xf0\x00\x00\x07\xe0\x00\x00\x07p\x00\x00\x0e \x00\x00\x1c\x00\x00\x008\x00\x00\x00x\x00\x00\x00p\x00\x00\x00\xe0\x00\x00\x00\xf0\x00\x00\x00p\x00\x00\x00\x00\x00\x00')

# list of frames
frames = [running1, running2, running3, running4, running5, running6, running7, running8, running9]

# function to display animation
def display_animation(frames, oled, delay=0.02):
    screen_width = 72
    frame_width = 31
    framenum = -frame_width  # Start position left of screen

    while True:
        for frame in frames:
            fb = framebuf.FrameBuffer(frame, frame_width, 40, framebuf.MONO_HLSB)  # Animation width=31, height=40
            oled.clear()
            for i in range(-frame_width, screen_width, frame_width):
                oled.blit(fb, framenum + i, 0)
            oled.show()
            time.sleep(delay)
            framenum += 2
            if framenum >= frame_width:
                framenum = 0  # Reset position to run continuously
                
# display the running animation
while True:
    display_animation(frames, oled)
